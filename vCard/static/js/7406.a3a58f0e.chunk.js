"use strict";(self.webpackChunkqrfy=self.webpackChunkqrfy||[]).push([[7406],{26982:function(e,t,n){n(72791);t.Z=n.p+"static/media/google.d4096036739850926880299a7f8b66c8.svg"},87331:function(e,t,n){var o=n(96844),i=n(80184);t.Z=function(){return(0,i.jsx)(o.qE.Divider,{children:(0,i.jsx)(o.qE.DividerContent,{children:"o"})})}},97406:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var o=n(74165),i=n(15861),a=n(29439),r=n(36249),s=n(72791),c=n(64880),l=n(26864),d=n(93539),u=n(4349),p=n(11312),g=n(96330),x=n(30793),h=n(26982),f=n(38175),m=n(4942),v=n(52775),j=n(35939),Z=n(45950),b=n(43729),w=n(4246),k={Dialog:(0,Z.D2)((function(e){return{paper:(0,m.Z)({padding:"24px 24px 24px",width:"100%",maxWidth:280,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},e.breakpoints.up("sm"),{maxWidth:388,padding:"40px 40px 40px"})}}))(v.ZP),Icon:(0,Z.zo)(w.Z)({fontSize:"50px !important"}),Title:(0,Z.zo)("p")({fontSize:"24px",lineHeight:"34px",color:"#000",textAlign:"center",marginTop:"24px",fontWeight:500}),Text:(0,Z.zo)("p")((function(e){var t=e.theme;return(0,m.Z)({fontSize:13,lineHeight:"24px",marginTop:20,marginBottom:32,fontWeight:500,color:b.O9.gray.darkest},t.breakpoints.up("md"),{fontSize:16,lineHeight:"26px",marginTop:22,marginBottom:58})})),Button:(0,Z.D2)((function(e){var t;return{root:(t={marginRight:12,width:"50%",minWidth:0,padding:0},(0,m.Z)(t,e.breakpoints.up("md"),{marginRight:17}),(0,m.Z)(t,"&:last-child",{marginRight:0}),t)}}))(j.Z)},M=n(80184);var S=function(e){var t=e.open,n=e.onClose;return(0,M.jsxs)(k.Dialog,{open:t,children:[(0,M.jsx)(k.Icon,{name:"triangle_warning_white"}),(0,M.jsx)(k.Title,{children:(0,M.jsx)(u.Z,{id:"account.modalAccountBanned.title",defaultMessage:"Cuenta suspendida"})}),(0,M.jsx)(k.Text,{children:(0,M.jsx)(u.Z,{id:"account.modalAccountBanned.description",defaultMessage:"Su cuenta ha sido suspendida por incumplir las pol\xedticas y condiciones del servicio. Para mas informaci\xf3n, p\xf3ngase en contacto con soporte."})}),(0,M.jsx)(k.Button,{onClick:function(){return n(!1)},children:(0,M.jsx)(u.Z,{id:"account.modalAccountBanned.button",defaultMessage:"Cerrar"})})]})},C=n(33025),B=n(94113),y=n(96844),T=n(87331),A=n(75087),P=n(54353),D=n(1413),_=n(37639),E=n(80107);var W=function(e){var t=e.token,n=e.withoutModal,r=e.errors,c=e.onGoBack,x=e.fetchUserData,h=e.onSuccess,f=(0,g.Z)(),m=(0,d.Z)(),v=(0,s.useState)(""),j=(0,a.Z)(v,2),Z=j[0],b=j[1],k=(0,s.useState)(!1),S=(0,a.Z)(k,2),C=S[0],B=S[1],T=Z?{error:!0,helperText:Z}:{},W=f.object().shape({code:f.string().twoFactorCode().required()});function z(){return(z=(0,i.Z)((0,o.Z)().mark((function e(n){var i,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.Z.validate2fa((0,E.z)(n.code),t);case 3:return e.next=5,x();case 5:h(),e.next=17;break;case 8:if(e.prev=8,e.t0=e.catch(0),"2fa_code_invalid"!==(s=null===(i=e.t0.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.errorCode)){e.next=14;break}return B(!0),e.abrupt("return",b(m.formatMessage({id:"myAccount.twoFactorAuthentication.invalidCode",defaultMessage:"C\xf3digo inv\xe1lido"})));case 14:if("invalid_token"!==s){e.next=16;break}return e.abrupt("return",c());case 16:b(r.generic);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return(0,M.jsxs)(y.x4.Container,{style:{display:"block"},children:[(0,M.jsx)(y.x4.Center,{children:(0,M.jsx)(A.Z,{withoutModal:n})}),(0,M.jsx)(l.J9,{initialValues:{code:""},onSubmit:function(e){return z.apply(this,arguments)},validationSchema:W,validateOnBlur:!1,children:function(e){var t=e.isSubmitting,n=e.handleSubmit,o=e.handleChange;return(0,M.jsx)(y.x4.Form,{onSubmit:function(e){e.preventDefault(),n(e)},children:(0,M.jsxs)(y.x4.Center,{children:[(0,M.jsx)(P.Z,{title:m.formatMessage({id:"account.login.topTitle",defaultMessage:"Bienvenido de nuevo!"}),description:m.formatMessage({id:"account.login.twoFactor.insertCode",defaultMessage:"Ingresa el c\xf3digo de la app de autenticaci\xf3n de 2 factores"})}),(0,M.jsx)(l.gN,(0,D.Z)({id:"login-2fa-code",name:"code",component:y.x4.TextField,autoFocus:!0,placeholder:"000 000",inputProps:{maxLength:7},style:{marginTop:28},onChange:function(e){b(""),o(e)}},T)),C&&(0,M.jsxs)(y.x4.InfoBox,{children:[(0,M.jsx)(w.Z,{name:"circle_info_white",size:24}),(0,M.jsx)("p",{children:(0,M.jsx)(u.Z,{id:"account.login.twoFactor.contactSupport",defaultMessage:"Si has perdido las credenciales de 2FA, contacta con <a>soporte</a>.",values:{a:function(e){return(0,M.jsx)("a",{href:"mailto:".concat(_.Do),children:e})}}})})]}),(0,M.jsxs)(y.x4.ButtonWrapper,{children:[(0,M.jsx)(y.x4.ActionButton,{fullWidth:!0,type:"submit",disabled:t,loading:t,children:(0,M.jsx)(u.Z,{id:"common.login"})}),(0,M.jsx)(y.x4.BackButtonWrapper,{children:(0,M.jsx)(y.x4.BackButton,{onClick:c,children:(0,M.jsx)(u.Z,{id:"common.goBack"})})})]})]})})}})]})};function z(e){var t=e.withoutModal,n=void 0!==t&&t,m=e.guestId,v=void 0===m?void 0:m,j=e.onSuccess,Z=(0,d.Z)(),b=(0,g.Z)(),w=(0,C.Ap)(),k=w.goToSection,D=w.fetchUserData,_=w.close,E=(0,s.useState)(!1),z=(0,a.Z)(E,2),I=z[0],F=z[1],q=(0,C.sS)(),H=q.paramError,N=q.paramErrorMessage,R=q.setParamError,L=(0,s.useState)(""),O=(0,a.Z)(L,2),G=O[0],U=O[1],J=(0,s.useState)(!1),Q=(0,a.Z)(J,2),V=Q[0],$=Q[1],Y=(0,s.useState)(""),K=(0,a.Z)(Y,2),X=K[0],ee=K[1],te=(0,c.TH)(),ne=(0,C.pN)(),oe=(0,c.k6)(),ie=(0,c.$B)([r.ZP.builder]),ae=(0,x.useQueryParams)(),re=n&&!ie,se=(0,s.useState)("user_account_closed"===H),ce=(0,a.Z)(se,2),le=ce[0],de=ce[1],ue=(0,s.useState)(!1),pe=(0,a.Z)(ue,2),ge=pe[0],xe=pe[1],he=b.object().shape({email:b.string().customEmail().required(),password:b.string().required().min(3)});function fe(){return(fe=(0,i.Z)((0,o.Z)().mark((function e(t){var n,i,a,r,s,c,l,d,u,g,x,h,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,i=t.password,F(!0),e.prev=2,e.next=5,p.Z.login(n,i,v);case 5:if(a=e.sent,r=a.is2faEnabled,s=a.token,!r){e.next=10;break}return e.abrupt("return",ee(s));case 10:return e.next=12,D();case 12:e.sent&&$(!0),e.next=25;break;case 16:if(e.prev=16,e.t0=e.catch(2),409!==(null===(c=e.t0.response)||void 0===c?void 0:c.status)||"user_account_closed"!==(null===(l=e.t0.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.errorCode)){e.next=21;break}return U(null),e.abrupt("return",de(!0));case 21:if(403!==(null===(u=e.t0.response)||void 0===u?void 0:u.status)||"USER_BANNED"!==(null===(g=e.t0.response)||void 0===g||null===(x=g.data)||void 0===x?void 0:x.message)){e.next=23;break}return e.abrupt("return",xe(!0));case 23:[400,401].includes(null===(h=e.t0.response)||void 0===h?void 0:h.status)?"collaborator_registration_incomplete"===(null===(f=e.t0.response.data)||void 0===f?void 0:f.errorCode)?U(ne.collaborator_registration_incomplete):U(Z.formatMessage({id:"account.login.credentialsError",defaultMessage:"El usuario y/o contrase\xf1a es incorrecto"})):U(ne.generic),R("");case 25:return e.prev=25,F(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[2,16,25,28]])})))).apply(this,arguments)}return(0,s.useEffect)((function(){var e=ae.get("token");ee(e),ae.delete("token"),oe.replace({search:ae.toString()})}),[]),(0,s.useEffect)((function(){"banned"===H&&xe(!0),V&&!n?_():V&&j()}),[V]),X?(0,M.jsx)(W,{token:X,withoutModal:n,errors:ne,onGoBack:function(){return ee("")},fetchUserData:D,onSuccess:function(){return $(!0)}}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(y.x4.Container,{style:{display:ge?"none":"block"},children:[(0,M.jsxs)(y.x4.Center,{children:[(0,M.jsx)(A.Z,{withoutModal:n}),N&&(0,M.jsx)(y.x4.Alert,{severity:"error",style:{marginTop:10},children:N})]}),(0,M.jsx)(l.J9,{initialValues:{email:"",password:""},onSubmit:function(e){return fe.apply(this,arguments)},validationSchema:he,validateOnBlur:!1,children:function(e){var t,o=e.isSubmitting,i=e.handleSubmit;return(0,M.jsx)(y.x4.Form,{onSubmit:function(e){e.preventDefault(),i(e)},children:(0,M.jsxs)(y.x4.Center,{children:[(0,M.jsx)(P.Z,{title:Z.formatMessage({id:"account.login.topTitle",defaultMessage:"Bienvenido de nuevo!"}),description:Z.formatMessage({id:"account.login.topDescription",defaultMessage:"Ingresa con tus redes o completa tus datos"})}),(0,M.jsx)(y.x4.LoginButtons,{children:(0,M.jsx)(y.x4.LoginButton,{fullWidth:!0,href:(0,B.h)("login",v,null===(t=te.state)||void 0===t?void 0:t.from),variant:"outlined",startIcon:(0,M.jsx)("img",{src:h.Z,alt:"Google logo"}),children:(0,M.jsx)(u.Z,{id:"account.signInWith",defaultMessage:"Iniciar sesi\xf3n con {provider}",values:{provider:"Google"}})})}),(0,M.jsx)(T.Z,{}),(0,M.jsx)(l.gN,{id:"login-email",name:"email",component:y.x4.TextField,autoFocus:!0,placeholder:Z.formatMessage({id:"account.emailPlaceholder",defaultMessage:"nombre@email.com"})}),(0,M.jsx)(l.gN,{id:"login-password",name:"password",component:y.x4.PasswordTextField,placeholder:Z.formatMessage({id:"account.passwordPlaceholder",defaultMessage:"Escribe tu contrase\xf1a aqu\xed..."}),type:"password"}),(0,M.jsxs)(y.x4.Text,{children:[(0,M.jsxs)("span",{children:[(0,M.jsx)(u.Z,{id:"account.forgotPassword",defaultMessage:"\xbfHas olvidado tu contrase\xf1a?"})," "]}),(0,M.jsx)(y.x4.TextButton,{type:"button",onClick:function(){re&&oe.push("/forgotten-password"),k("forgottenPassword",!n)},children:(0,M.jsx)(u.Z,{id:"common.clickHere",defaultMessage:"Pincha aqu\xed"})})]}),(0,M.jsx)(y.x4.ButtonWrapper,{children:(0,M.jsx)(y.x4.ActionButton,{fullWidth:!0,type:"submit",disabled:o,loading:I,children:(0,M.jsx)(u.Z,{id:"common.login"})})}),G&&(0,M.jsx)(y.x4.ErrorMessage,{children:G}),(0,M.jsxs)(y.x4.Text,{children:[(0,M.jsxs)("span",{children:[(0,M.jsx)(u.Z,{id:"account.noAccount",defaultMessage:"\xbfNo tienes cuenta?"})," "]}),(0,M.jsx)(y.x4.TextButton,{type:"button",onClick:function(){re&&oe.push("/register"),k("create",!n)},children:(0,M.jsx)(u.Z,{id:"account.createOne",defaultMessage:"Crear una cuenta"})})]})]})})}})]}),(0,M.jsx)(S,{open:ge,onClose:xe}),(0,M.jsx)(f.Z,{open:le,onConfirm:function(){de(!1)},login:!0})]})}z.defaultProps={onSuccess:function(){return null},withoutModal:!1};var I=z},54353:function(e,t,n){var o=n(96844),i=n(80184);function a(e){var t=e.title,n=e.description;return(0,i.jsxs)(o.F8.TextWrapper,{children:[t&&(0,i.jsx)(o.F8.Title,{children:t}),n&&(0,i.jsx)(o.F8.Description,{children:n})]})}a.defaultProps={title:"",description:""},t.Z=a},75087:function(e,t,n){var o=n(37639),i=n(64880),a=n(36249),r=n(30793),s=n(96844),c=n(80184);function l(e){var t=e.withoutModal,n=(0,r.useIntl)(),l=(0,i.$B)([a.ZP.builder]),d=n.formatMessage({id:"altLogo",defaultMessage:"Generador de c\xf3digos QR"});return(0,c.jsx)(s.we.Container,{children:t&&!l&&(0,c.jsx)(s.we.LogoLink,{to:(0,a.ke)("home"),children:(0,c.jsx)(s.we.LogoImg,{src:o.jY,alt:d,title:d,width:104,height:21})})})}l.defaultProps={withoutModal:!1},t.Z=l},94113:function(e,t,n){n.d(t,{h:function(){return s}});var o=n(29439),i=n(36249),a="https://accounts.google.com/o/oauth2/v2/auth",r={scope:"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email",response_type:"code",client_id:"1068337497404-ldeirev97u9t7vc1cvlmftb5gqhhk5c4.apps.googleusercontent.com"};function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,s=new URL(a),c={to:n===i.ZP.plansAndPayments?"payments":"dashboard",gclid:"create"===e?localStorage.getItem("gclid"):void 0};return t&&(c.guestId=t),s.searchParams.append("state",JSON.stringify(c)),s.searchParams.append("redirect_uri","".concat("https://qrfy.com","/api/user/account/oauth/google/").concat(e)),Object.entries(r).forEach((function(e){var t=(0,o.Z)(e,2),n=t[0],i=t[1];s.searchParams.append(n,i)})),s.toString()}},38175:function(e,t,n){n.d(t,{Z:function(){return g}});var o=n(93539),i=n(4349),a=n(4942),r=n(52775),s=n(35939),c=n(45950),l=n(43729),d=n(4246),u={Dialog:(0,c.D2)((function(e){return{paper:(0,a.Z)({padding:"24px 24px 24px",width:"100%",maxWidth:280,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},e.breakpoints.up("sm"),{maxWidth:388,padding:"40px 40px 40px"})}}))(r.ZP),Icon:(0,c.zo)(d.Z)({fontSize:"50px !important"}),Title:(0,c.zo)("p")({fontSize:"24px",lineHeight:"34px",color:"#000",textAlign:"center",marginTop:"24px",fontWeight:500}),Text:(0,c.zo)("p")((function(e){var t=e.theme;return(0,a.Z)({fontSize:13,lineHeight:"24px",marginTop:20,marginBottom:32,fontWeight:500,color:l.O9.gray.darkest},t.breakpoints.up("md"),{fontSize:16,lineHeight:"26px",marginTop:22,marginBottom:58})})),Button:(0,c.D2)((function(e){var t;return{root:(t={marginRight:12,width:"50%",minWidth:0,padding:0},(0,a.Z)(t,e.breakpoints.up("md"),{marginRight:17}),(0,a.Z)(t,"&:last-child",{marginRight:0}),t)}}))(s.Z)},p=n(80184);var g=function(e){var t=e.open,n=e.onConfirm,a=e.login,r=(0,o.Z)(),s=r.formatMessage({defaultMessage:"Esta cuenta ha sido eliminada. No es posible crear una cuenta con este correo.",id:"account.create.modalAccountClosed.description"}),c=r.formatMessage({defaultMessage:"Cuenta cerrada. Esta cuenta ha sido eliminada.",id:"account.login.modalAccountClosed.description"});return(0,p.jsxs)(u.Dialog,{open:t,children:[(0,p.jsx)(u.Icon,{name:"triangle_warning_white"}),(0,p.jsx)(u.Title,{children:(0,p.jsx)(i.Z,{id:"account.modalAccountClosed.title",defaultMessage:"Cuenta cerrada"})}),(0,p.jsx)(u.Text,{children:a?c:s}),(0,p.jsx)(u.Button,{onClick:n,children:(0,p.jsx)(i.Z,{id:"myAccount.closeAccount.confirmed",defaultMessage:"Confirmado"})})]})}},80107:function(e,t,n){function o(e){return e.replace(/\s/g,"")}n.d(t,{z:function(){return o}})}}]);